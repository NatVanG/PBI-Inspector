{
  "pbiEntries": [
    {
      "name": "reportLayout",
      "pbixEntryPath": "Report/Layout",
      "pbipEntryPath": "Inventory sample.Report\\report.json",
      "contentType": "json",
      "codepage": 1200,
      "rules": [
        {
          "name": "Remove custom visuals which are not used in the report.",
          "description": "#1 Returns an array of custom visual names to be removed if any.",
          "path": "$",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "filter": [
                {
                  "map": [
                    {
                      "var": "customvis"
                    },
                    {
                      "if": [
                        {
                          "==": [
                            {
                              "strcontains": [
                                {
                                  "tostring": [
                                    {
                                      "var": "pages"
                                    }
                                  ]
                                },
                                {
                                  "var": ""
                                }
                              ]
                            },
                            0
                          ]
                        },
                        {
                          "var": ""
                        },
                        ""
                      ]
                    }
                  ]
                },
                {
                  "!!": [
                    {
                      "var": ""
                    }
                  ]
                }
              ]
            },
            {
              "customvis": "/publicCustomVisuals",
              "pages": "/sections"
            },
            []
          ]
        },
        {
          "name": "Reduce the number of visible visuals on the page",
          "description": "#2 Reduce the number of visible visuals on the page. Returns false if the number of visible visuals on the page is exceeded. Use paramMaxVisualsPerPage parameter to set the number of visible visuals per page.",
          "disabled": true,
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.visualContainers[*].config",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "<=": [
                {
                  "count": [
                    {
                      "filter": [
                        {
                          "var": "visuals"
                        },
                        {
                          "!=": [
                            {
                              "var": "singleVisual.display.mode"
                            },
                            "hidden"
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "var": "paramMaxVisualsPerPage"
                }
              ]
            },
            {
              "visuals": ".",
              "paramMaxVisualsPerPage": 6
            },
            true
          ]
        },
        {
          "name": "Reduce the number of objects within visuals",
          "description": "#3 Reduce the number of objects within visuals",
          "disabled":  true,
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.visualContainers[*].config",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "map": [
                {
                  "filter": [
                    {
                      "var": "q"
                    },
                    {
                      ">": [
                        {
                          "count": [
                            {
                              "var": "singleVisual.prototypeQuery.Select"
                            }
                          ]
                        },
                        4
                      ]
                    }
                  ]
                },
                {
                  "var": "name"
                }
              ]
            },
            {
              "q": "."
            },
            []
          ]
        },
        {
          "name": "Reduce usage of TopN filtering visuals by page",
          "description": "#4 Reduce usage of TopN filters visuals by page",
          "disabled":  true,
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.visualContainers[*].filters",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "<=": [
                {
                  "count": [
                    {
                      "filter": [
                        {
                          "var": "f"
                        },
                        {
                          "some": [
                            {
                              "var": ""
                            },
                            {
                              "==": [
                                {
                                  "var": "type"
                                },
                                "TopN"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "var": "paramMaxTopNFilteringPerPage"
                }
              ]
            },
            {
              "f": ".",
              "paramMaxTopNFilteringPerPage": 2
            },
            true
          ]
        },
        {
          "name": "Reduce usage of Advanced filtering visuals by page",
          "description": "#5 Reduce usage of Advanced filtering visuals by page",
          "disabled":  true,
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.visualContainers[*].filters",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "<=": [
                {
                  "count": [
                    {
                      "filter": [
                        {
                          "var": "f"
                        },
                        {
                          "some": [
                            {
                              "var": ""
                            },
                            {
                              "==": [
                                {
                                  "var": "type"
                                },
                                "Advanced"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "var": "paramMaxAdvancedFilteringVisualsPerPage"
                }
              ]
            },
            {
              "f": ".",
              "paramMaxAdvancedFilteringVisualsPerPage": 2
            },
            true
          ]
        },
        {
          "name": "Reduce number of pages per report",
          "description": "#6 Reduce number of pages per report",
          "disabled":  true,
          "path": "$",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "<=": [
                {
                  "count": [
                    {
                      "var": "s"
                    }
                  ]
                },
                {
                  "var": "paramMaxNumberOfPagesPerReport"
                }
              ]
            },
            {
              "s": "/sections",
              "paramMaxNumberOfPagesPerReport": 10
            },
            true
          ]
        },
        {
          "name": "Avoid setting ‘Show items with no data’ on columns",
          "description": "#7 Avoid setting ‘Show items with no data’ on columns. Returns an array of visual names which have the option ‘Show items with no data’ enabled on one or more columns.",
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.visualContainers[*].config",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "map": [
                {
                  "filter": [
                    {
                      "map": [
                        {
                          "var": "c"
                        },
                        [
                          {
                            "var": "name"
                          },
                          {
                            "!!": [
                              {
                                "var": "singleVisual.showAllRoles"
                              }
                            ]
                          }
                        ]
                      ]
                    },
                    {
                      "var": 1
                    }
                  ]
                },
                {
                  "var": 0
                }
              ]
            },
            {
              "c": "."
            },
            []
          ]
        },
        {
          "name": "Tooltip and Drillthrough pages should be hidden",
          "description": "#8 Tooltip and Drillthrough pages should be hidden",
          "forEachPath": "$.sections[*]",
          "forEachPathName": "$.name",
          "forEachPathDisplayName": "$.displayName",
          "path": "$.config",
          "pathErrorWhenNoMatch": true,
          "test": [
            {
              "none": [
                {
                  "var": "c"
                },
                {
                  "and": [
                    {
                      "in": [
                        {
                          "var": "type"
                        },
                        [
                          1,
                          2
                        ]
                      ]
                    },
                    {
                      "!=": [
                        {
                          "var": "visibility"
                        },
                        1
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "c": "."
            },
            true
          ]
        },
        {
          "name": "Rule Template",
          "description": "Rule template",
          "disabled":  true,
          "path": "$",
          "pathErrorWhenNoMatch": true,
          "test": [
            true,
            {},
            true
          ]
        }
      ]
    }
  ]
}